<!DOCTYPE html>
<head>
	<meta charset="utf-8"/>
</head>
<html>
<body>

<p>
  David Romanski<br>
  JavaScript Exercises<br>
  Created: 04/15/2020<br>
  Eloquent Javascript<br>
  Chapter 8: Retry<br>
  Comments: A function only works 20% of the time. Error check so it always works.
</p>

<p id = "exercise">
	Press f12 for output.
</p>

<script>
	class MultiplicatorUnitFailure extends Error {}

	function primitiveMultiply(a, b) {
	  if (Math.random() < 0.2) {
	    return a * b;
	  } else {
	    throw new MultiplicatorUnitFailure("Klunk");
	  }
	}

	function reliableMultiply(a, b) {
	  // Your code here.
	  for (;;) {
	  	try {
	  		return primitiveMultiply(a, b);
	  	} catch (e) {
	  		if (!(e instanceof MultiplicatorUnitFailure))
	  			throw e;
	  	}
	  }
	}

	console.log(primitiveMultiply(8, 8));
	console.log(reliableMultiply(8, 8));
	// â†’ 64
</script>

</body>
</html>
